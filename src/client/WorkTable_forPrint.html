<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="robots" content="noindex,nofollow">
<link rel="stylesheet" type="text/css" href="WorkTable.css">
<title>å‡ºå‹¤ç°¿</title>
<script src="angular.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="require.js"></script>
<script src="WorkTable.js"></script>
</head>

<body ng-app="WorkTblApp">

    <div ng-controller="WorkTblCtrl">
        <span class="hidden-print">
        <input type="checkbox" class="chk_lock" checked="{{lock}}" ng-model="lock" ng-change="changeEditLock()">
        <span class="mark_lock">ğŸ”’</span>
        <select class="select_user" ng-model="selectedUser" ng-options="user for user in userList" ng-change="selectUser()"></select>
        <button class="btn_shiftMonth" ng-click="shiftMonth(-1)"> < å‰æœˆ </button>
        <button class="btn_shiftMonth" ng-click="shiftMonth(1)"> æ¬¡æœˆ > </button>
        <button class="btn_download" style="left: 400px" onclick="document.getElementById('download').click()">ä¿å­˜</button>
        <a id="download" href="#" download="#.json" ng-click="download_workTable()" hidden></a>
        </span>

        <span class="content-print">
        <table>
        <tr>
        <td width="400px"><h3>{{thisYear}}å¹´{{thisMonth+1}}æœˆ å‡ºå‹¤ç°¿ </h3></td>
        <td width="200px"><label style="font-weight: bold">æ°å : {{staff_name}}</label></td>
        <td width="300px"><label style="font-weight: bold">æ‰€å± : {{staff_post}}</label></td>
        </tr>
        </table>
        <table class="WorkTblTb">

        <!-- ãƒ˜ãƒƒãƒ€ -->
        <tr>
            <th width="60px">æ—¥ä»˜</th>
            <th width="40px">æ›œæ—¥</th>
            <th>å§‹æ¥­æ™‚é–“</th>
            <th>çµ‚æ¥­æ™‚é–“</th>
            <th>ä¼‘æ†©æ™‚é–“</th>
            <th>åŠ´åƒæ™‚é–“</th>
            <th>ä¼‘æš‡</th>
            <th>å‚™è€ƒ</th>
        </tr>
        <!-- ãƒ‡ãƒ¼ã‚¿ -->
        <tr ng-repeat="(index, day_work) in work_table">
            <!-- æ—¥ -->
            <th ng-style="getholidayStyle(day_work)">{{day_work.month}}/{{day_work.day}}</th>
            <!-- æ›œæ—¥ -->
            <th ng-style="getholidayStyle(day_work)">{{day_work.dayofweek}}</th>
            <!-- å§‹æ¥­æ™‚é–“ -->
            <td><input type="time" readonly class="inputTime" step="1800" list="WorkStTimeList"
                value="{{work_table[index].timSt}}" ng-model="work_table[index].timSt" ng-change="calcWkTim(index)"></td>
            <!-- çµ‚æ¥­æ™‚é–“ -->
            <td><input type="time" readonly class="inputTime" step="1800" list="WorkEnTimeList"
                value="{{work_table[index].timEn}}" ng-model="work_table[index].timEn" ng-change="calcWkTim(index)"></td>
            <!-- ä¼‘æ†©æ™‚é–“ -->
            <td><input type="time" readonly class="inputTime" step="1800" list="WorkBkTimeList"
                value="{{work_table[index].timBk}}" ng-model="work_table[index].timBk" ng-change="calcWkTim(index)"></td>
            <!-- åŠ´åƒæ™‚é–“ -->
            <td><input type="text" readonly class="inputTime" 
                value="{{work_table[index].timWk}}" readonly>
            </td>
            <td width="90">
                <select name="holidayType" style="width:100%;border:1px;-webkit-appearance: none;" 
                    ng-model="work_table[index].holidayType" ng-change="selectHolidayType(index)" disabled>
                    <option value=""></option>
                    <option value="ä¼‘æ—¥å‡ºå‹¤">ä¼‘æ—¥å‡ºå‹¤</option>
                    <option value="ä¼‘æš‡">ä¼‘æš‡</option>
                    <option value="æœ‰çµ¦ä¼‘æš‡">æœ‰çµ¦ä¼‘æš‡</option>
                    <option value="å¿Œå¼•">å¿Œå¼•</option>
                </select>
            </td>
            <!-- å‚™è€ƒ -->
            <td><input type="text" readonly style="width:200px; height:20px" maxlength="20" value="{{day_work.note}}" ng-model="day_work.note"></td>
        </tr>
        <!-- åˆè¨ˆåŠ´åƒæ™‚é–“ -->
        <tr>
            <td class="disableCell"></td>
            <td class="disableCell"></td>
            <td class="disableCell"></td>
            <td class="disableCell"></td>
            <td class="disableCell"></td>
            <td style="font-size: 18px; text-align:right">{{sumWkTim}}</td>
            <td style="font-size: 18px; text-align:right">{{countPaidVacation()}}</td>
            <td style="font-size: 18px; text-align:right">å‹¤å‹™æ—¥æ•° : {{numWkDays}}</td>
        </tr>
        </table>
        </span>
    </div>
    
</body>
</html>